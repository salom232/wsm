<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="">
        <meta name="theme-color" content="#7952b3">
        <title>Administración de roles y privilegios</title>

        <!-- CSS Files -->
        <link href="css/brands.css" rel="stylesheet">
        <link href="css/solid.css" rel="stylesheet">
        <link href="css/fontawesome.css" rel="stylesheet">
        <link href="css/bootstrap.min.css" rel="stylesheet">        
        <link href="css/animate.min.css" rel="stylesheet">
        <link href="css/offcanvas.css" rel="stylesheet">
        <link href="css/select2.min.css" rel="stylesheet">
        <link href="css/select2-bootstrap4.css" rel="stylesheet">
        <link href="css/dataTables.bootstrap5.min.css" rel="stylesheet">
        <!-- CSS Files -->
        
    </head>
    <body class="bg-light">
        <div class="overlay">
            <div id="loading-img"></div>
        </div>
        <nav class="navbar navbar-expand-lg fixed-top" aria-label="Main navigation" id ="uppernavbar">
        <div class="container-fluid">
            <h2 class="h2 mb-0 text-black lh-2 fontgandhi">Catálogo Gandhi</h2>
            <img class="me-3" src="media/logo.png" alt="" width="224" height="92.4">
        </div>
        </nav>

        <div class="nav-scroller shadow-sm" id="subnav">
            <div id="wrappersub">
                <div id="first">&nbsp;&nbsp;&nbsp;&nbsp;Bienvenido:&nbsp;<b><label id="UserNameRol"></label></b></div>
                <div id="second">Rol:&nbsp;<label id="UserRol"></label>&nbsp;&nbsp;&nbsp;&nbsp;</div>
            </div>
        </div>
        <div id="wrapper">
            <div class="overlay"></div>
            
            <!-- Sidebar Menu -->
            <nav class="navbar navbar-inverse fixed-top" id="sidebar-wrapper" role="navigation">
                <ul class="nav sidebar-nav" id="NavBarMenu">
                    <div class="sidebar-header">
                        <div class="sidebar-brand">
                            <a href="#">Menú</a>
                        </div>
                    </div>
                </ul>
            </nav>

            <button type="button" class="hamburger animated fadeInLeft is-closed" data-toggle="offcanvas">
                <span class="hamb-top"></span>
                <span class="hamb-middle"></span>
                <span class="hamb-bottom"></span>
            </button>
            <!-- Sidebar Menu -->

            <!-- Content area (for work) -->
            <main class="container">
                <!-- Option Title -->
                <div class="d-flex align-items-center p-3 my-3 text-white bg-purple rounded shadow-sm">
                    <div class="lh-1">
                        <h1 class="h6 mb-0 text-white lh-1">Administración de roles y privilegios</h1>
                        <h1 class="h6 mb-0 text-white lh-1">Usuarios</h1>
                    </div>
                </div>
                <!-- Option Title -->

                <!-- Option Work Area -->
                <div class="my-3 p-3 bg-white rounded shadow-sm">
                    <h6 class="pb-2 mb-0">Administración</h6>
                    <nav>
                        <div class="nav nav-tabs" id="nav-tab" role="tablist">
                          <button class="nav-link active" id="nav-home-tab" data-bs-toggle="tab" data-bs-target="#nav-home" type="button" role="tab" aria-controls="nav-home" aria-selected="true">Roles</button>
                          <button class="nav-link" id="nav-profile-tab" data-bs-toggle="tab" data-bs-target="#nav-profile" type="button" role="tab" aria-controls="nav-profile" aria-selected="false">Usuarios</button>
                        </div>
                    </nav>
                    <div class="tab-content" id="nav-tabContent">
                        <div class="tab-pane fade show active" id="nav-home" role="tabpanel" aria-labelledby="nav-home-tab">
                            <br>
                            <button class="btn buttonm-background buttonm-font-color buttonm" type="button" data-bs-toggle="modal" data-bs-target="#NewRolModal">
                                Nuevo Rol
                            </button>
                            <br>
                            <center>
                                <div class="MainBodyContent">
                                    <table id="DataPrivileges" class="table table-striped table-bordered" width="100%">
                                        <thead>
                                            <tr>
                                                <th align="center">Rol</th>
                                                <th align="center">Descripción</th>
                                                <th align="center">Editar</th>
                                                <th align="center">Act / DesAct</th>
                                                <th align="center">Eliminar</th>
                                            </tr>
                                        </thead>
                                        <tbody id="TDataPrivileges"></tbody>
                                        <tfoot>
                                            <tr>
                                                <th align="center">Rol</th>
                                                <th align="center">Descripción</th>
                                                <th align="center">Editar</th>
                                                <th align="center">Act / DesAct</th>
                                                <th align="center">Eliminar</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </center>
                        </div>
                        <div class="tab-pane fade" id="nav-profile" role="tabpanel" aria-labelledby="nav-profile-tab">
                            <br>
                            <button class="btn buttonm-background buttonm-font-color buttonm" type="button" data-bs-toggle="modal" data-bs-target="#NewUserModal">
                                Nuevo Usuario
                            </button>
                            <br>
                            <center>
                                <div class="MainBodyContent">
                                    <table id="DataUsers" class="table table-striped table-bordered" width="100%">
                                        <thead>
                                            <tr>
                                                <th align="center">ID</th>
                                                <th align="center">UserID</th>
                                                <th align="center">Nombre</th>
                                                <th align="center">ID Proovedor</th>
                                                <th align="center">Contraseña</th>
                                                <th align="center">Roles</th>
                                            </tr>
                                        </thead>
                                        <tbody id="TDataUsers"></tbody>
                                        <tfoot>
                                            <tr>
                                                <th align="center">ID</th>
                                                <th align="center">UserID</th>
                                                <th align="center">Nombre</th>
                                                <th align="center">ID Proovedor</th>
                                                <th align="center">Contraseña</th>
                                                <th align="center">Roles</th>
                                            </tr>
                                        </tfoot>
                                    </table>
                                </div>
                            </center>
                        </div>
                    </div>
                </div>
            </main>
            <!-- Content area (for work) -->
        </div>

        <!-- Message Modal -->
        <div class="modal fade" id="MessageModal" tabindex="-1" aria-labelledby="MessageModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ModalTitle"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table id="DataPrivilegesEdit" class="table table-striped table-bordered js_data_tables" width="100%">
                        <thead>
                            <tr>
                                <th align="center">RolID</th>
                                <th align="center">Tipo</th>
                                <th align="center">Descripción</th>
                                <th align="center">Activo</th>
                            </tr>
                        </thead>
                        <tbody id="TDataPrivilegesEdit"></tbody>
                        <tfoot>
                            <tr>
                                <th align="center">RolID</th>
                                <th align="center">Tipo</th>
                                <th align="center">Descripción</th>
                                <th align="center">Activo</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary js_check_btn" id="updateData">Guardar Cambios</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button> 
                </div>
            </div>
            </div>
        </div>

        <!-- Message Modal -->
        <div class="modal fade" id="MessageModaluser" tabindex="-1" aria-labelledby="MessageModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ModalTitle"></h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <table id="DataUserRolesEdit" class="table table-striped table-bordered js_data_tables_user" width="100%">
                        <thead>
                            <tr>
                                <th align="center">RolID</th>
                                <th align="center">Descripción</th>
                                <th align="center">Activo</th>
                            </tr>
                        </thead>
                        <tbody id="TDataUserRolesEdit"></tbody>
                        <tfoot>
                            <tr>
                                <th align="center">RolID</th>
                                <th align="center">Descripción</th>
                                <th align="center">Activo</th>
                            </tr>
                        </tfoot>
                    </table>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary js_check_btnuser" id="updateUserData">Guardar Cambios</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
            </div>
        </div>

        <!-- Progress Bar Modal -->
        <div class="modal fade" id="pleaseWaitDialog" tabindex="-1" data-backdrop="static" data-keyboard="false" aria-labelledby="pleaseWaitDialogLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title">Please wait...</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" role="progressbar" 
                        aria-valuenow="75" aria-valuemin="0" aria-valuemax="100" style="width: 75%"></div>
                    </div>
                </div>
                <div class="modal-footer">
                </div>
            </div>
            </div>
        </div>

        <!-- Update Modal -->
        <div class="modal fade" id="UpdateModal" tabindex="-1" aria-labelledby="UpdateModalLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ModalTitle">Modificación de Roles</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <label id="ModalBodyUpd"></label>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="ExecfuneditrolAD()" id="updateData">Continuar</button>
                </div>
            </div>
            </div>
        </div>

        <!-- Alert Modal -->
        <div class="modal fade" id="ProcessModal" tabindex="-1" aria-labelledby="UpdateModalLabel" aria-hidden="true">
            <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ModalTitle">Proceso Terminado</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <label id="ProcessModalBody"></label>
                </div>
                <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Aceptar</button>
                </div>
            </div>
            </div>
        </div>

        <!-- New Rol Modal -->
        <div class="modal fade" id="NewRolModal" tabindex="-1" aria-labelledby="UpdateModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ModalTitle">Creación de nuevo Rol</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="card card-body">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            PortalProv:&nbsp;
                                        </span>                    
                                    </div>
                                    <select class="form-select select2-plug" id="InRol">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Nombre:&nbsp;
                                        </span>                    
                                    </div>
                                    <input type="text" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="RolID">
                                </div>
                            </div>
                            <div class="col-sm-8">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Descripción:&nbsp;
                                        </span>                    
                                    </div>
                                    <input type="text" class="form-control" aria-label="RolDesc" aria-describedby="basic-addon1" id="RolDesc">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="ExecfuneditrolADNew()" id="updateData">Crear</button>
                </div>
            </div>
            </div>
        </div>

        
        <!-- New Usre Modal -->
        <div class="modal fade" id="NewUserModal" tabindex="-1" aria-labelledby="UpdateModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ModalTitle">Creación de nuevo usuario</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="card card-body">
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            RolCatWeb:&nbsp;
                                        </span>                    
                                    </div>
                                    <select class="form-select select2-plug" id="InCatRol">
                                    </select>
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Proveedor:&nbsp;
                                        </span>                    
                                    </div>
                                    <select class="form-select select2-plug" id="InProvs">
                                    </select>
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Usuario:&nbsp;
                                        </span>                    
                                    </div>
                                    <input type="text" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="IdUser">
                                </div>
                            </div>
                            <div class="col-sm-6">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Contraseña:&nbsp;
                                        </span>                    
                                    </div>
                                    <input type="password" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="IdPass">
                                </div>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Nombre:&nbsp;
                                        </span>                    
                                    </div>
                                    <input type="text" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="RolUsrName">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Apellido P.:&nbsp;
                                        </span>                    
                                    </div>
                                    <input type="text" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="RolUsrLastNP">
                                </div>
                            </div>
                            <div class="col-sm-4">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">
                                            Apellido M.:&nbsp;
                                        </span>                    
                                    </div>
                                    <input type="text" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="RolUsrLastNM">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                    <button type="button" class="btn btn-primary" onclick="AddNewUser()" id="CreateData">Crear</button>
                </div>
            </div>
            </div>
        </div>

        <!-- ChangePass Modal -->
        <div class="modal fade" id="ChangePassModal" tabindex="-1" aria-labelledby="MessageModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                <h5 class="modal-title" id="ModalTitle">Cambio de contraseña</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        Nuevo Password:&nbsp;
                                    </span>                    
                                </div>
                                <input type="password" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="NewPass">
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        Confirmar:&nbsp;
                                    </span>                    
                                </div>
                                <input type="password" class="form-control" aria-label="RolID" aria-describedby="basic-addon1" id="NewPassConf">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" id="updateUserData" onclick="ChangePass()">Cambiar Contraseña</button>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                </div>
            </div>
            </div>
        </div>
        
        <footer class="footer">
            <span>Año © 2021 | Librerías Gandhi S.A. de C.V.</span>
        </footer>
        <!-- JS Files -->
        <script src="js/URI.js"></script>
        <script src="js/bootstrap.bundle.min.js"></script>
        <script src="js/jquery-3.6.0.min.js"></script>
        <script src="js/offcanvas.js"></script>
        <script src="js/hiddenbar.js"></script>
        <script src="js/validations.js"></script>
        <script src="js/privileges.js"></script>
        <script src="js/select2.min.js"></script>
        <script src="js/jquery.inputmask.js"></script>
        <script src="js/axios.min.js"></script>
        <script src="js/jszip.js"></script>
        <script src="js/xlsx.full.min.js"></script>
        <script src="js/jquery.dataTables.min.js"></script>
        <script src="js/dataTables.bootstrap5.min.js"></script>
        <!-- Global site tag (gtag.js) - Google Analytics -->
        <script async src="https://www.googletagmanager.com/gtag/js?id=G-DST9YFQJZ9"></script>
        <script>
            window.dataLayer = window.dataLayer || [];
            function gtag(){dataLayer.push(arguments);}
            gtag('js', new Date());

            gtag('config', 'G-DST9YFQJZ9');
        </script>
        <!-- JS Files -->
    </body>
</html>